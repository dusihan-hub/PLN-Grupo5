str_remove(articulos[[1]], "<div.*>")
print(articulos[[1]])
str_remove(articulos[[1]], '<h5 class="articulo">')
str_remove(articulos[[1]], "</h5>")
print(articulos[[1]])
str_remove(articulos[[1]], '<h5 class="articulo">.*</h5>.*</div>.*<div.*>')
limpiar_titulo = function(x){
x = str_remove(x, '<h5 class="articulo">')
x = str_remove(x, "</h5>")
x = str_remove(x, "</div>")
x = str_remove(x, "<div.*>")
}
for (i in 1:length(articulos)){
articulos[[i]] = limpiar_titulo(articulos[[i]])
}
print(articulos[[1]])
limpiar_titulo = function(x){
x = str_remove(x, '<h5 class="articulo">')
x = str_remove(x, "</h5>")
x = str_remove(x, "</div>")
x = str_remove(x, "<div.*>")
x = str_trim(x)
}
for (i in 1:length(articulos)){
articulos[[i]] = limpiar_titulo(articulos[[i]])
}
print(articulos[[1]])
isTRUE(articulos[[1]])
str_detect(articulos[[1]], "")
print(articulos[[1]] == "")
print(articulos[[1]][!articulos[[1]] == ""])
limpiar_titulo = function(x){
x = str_remove(x, '<h5 class="articulo">')
x = str_remove(x, "</h5>")
x = str_remove(x, "</div>")
x = str_remove(x, "<div.*>")
x = str_trim(x)
x = x[!x == ""]
}
for (i in 1:length(articulos)){
articulos[[i]] = limpiar_titulo(articulos[[i]])
}
print(articulos[[1]])
limpiar_p = function(x){
x= str_remove(x, "<p.*>")
x =str_remove(x, "</p>")
x = str_trim(x)
}
for (i in 1:length(articulos)){
articulos[[i]] = limpiar_titulo(articulos[[i]])
articulos[[i]] = limpiar_p(articulos[[i]])
}
print(articulos[[1]])
articulos = list()
i=1
fin = FALSE
#Sacar los articulos
while (i < length(inicio_const) && !fin){
if (inicio_const[i] == fin_const){
fin = TRUE
}else{
articulo = list(const[inicio_const[i]:inicio_const[i+1]-1])
articulos = c(articulos, articulo)
i = i+1
}
}
print(articulos[[1]])
limpiar_p = function(x){
x= str_remove(x, '<p class="parrafo_?_2?">')
x =str_remove(x, "</p>")
x = str_trim(x)
}
for (i in 1:length(articulos)){
articulos[[i]] = limpiar_titulo(articulos[[i]])
articulos[[i]] = limpiar_p(articulos[[i]])
}
print(articulos[[1]])
limpiar_p = function(x){
x= str_remove(x, '<p class="parrafo_?2?">')
x =str_remove(x, "</p>")
x = str_trim(x)
}
for (i in 1:length(articulos)){
articulos[[i]] = limpiar_titulo(articulos[[i]])
articulos[[i]] = limpiar_p(articulos[[i]])
}
print(articulos[[1]])
print(articulos[[20]])
articulos = sort(articulos, decreasing = TRUE)
which.max(articulos)
tabla = table(articulos)
tabla = data.frame(articulos)
tabla = as.vector(articulos)
View(tabla)
tabla = vector(articulos)
tabla = unlist(articulos)
print(tabla)
maxi = 0
for (i in 1:length(articulos)){
maxi = max(length(articulos[[i]]), maxi)
}
maxi = 0
for (i in 1:length(articulos)){
maxi = max(length(articulos[[i]]), maxi)
if (length(articulos[[i]]) == maxi){
res = i
}
}
print(res)
print(articulos[[res]][1])
print(res)
print(length(articulos[[res]]))
const = readLines("https://www.boe.es/buscar/act.php?id=BOE-A-1978-31229&p=20110927&tn=0", encoding="UTF-8")
inicio_const = grep('<h5 class="articulo">',const, fixed=TRUE)
fin_const = grep('<h5 class=\"articulo\">Disposición adicional primera.</h5>', const, fixed=TRUE)
articulos = list()
i=1
fin = FALSE
#Sacar los articulos
while (i < length(inicio_const) && !fin){
if (inicio_const[i] == fin_const){
fin = TRUE
}else{
articulo = list(const[inicio_const[i]:inicio_const[i+1]-1])
articulos = c(articulos, articulo)
i = i+1
}
}
print(articulos[[1]])
limpiar_titulo = function(x){
x = str_remove(x, '<h5 class="articulo">')
x = str_remove(x, "</h5>")
x = str_remove(x, "</div>")
x = str_remove(x, "<div.*>")
x = str_trim(x)
x = x[!x == ""]
}
limpiar_p = function(x){
x= str_remove(x, '<p class="parrafo_?2?">')
x =str_remove(x, "</p>")
x = str_trim(x)
}
for (i in 1:length(articulos)){
articulos[[i]] = limpiar_titulo(articulos[[i]])
articulos[[i]] = limpiar_p(articulos[[i]])
}
maxi = 0
for (i in 1:length(articulos)){
maxi = max(length(articulos[[i]]), maxi)
if (length(articulos[[i]]) == maxi){
res = i
}
}
print(articulos[[res]][1])
print("Tiene: ",paste(length(articulos[[res]]), " párrafos contando con el título"))
print("Tiene: ",paste(length(articulos[[res]]), " párrafos contando con el título"))
print(paste("Tiene: ",length(articulos[[res]]), " párrafos contando con el título"))
print(articulos[[res]][1])
library("quanteda")
library("stringr")
library("stringi")
library("quanteda")
library("udpipe")
udpipe_download_model("spanish_ancora")
?udpipe_download_model
udpipe_download_model("spanish-ancora")
corp = readRDS("const_es.rds")
modelo = udpipe::udpipe_load_model("spanish-ancora-ud-2.5-191206.udpipe")
summary(sorp)
summary(corp)
docvars(corp)
names(corp)
summary(corp)
length(corp)
?udpipe_annotate
corp[1]
corp[2]
corp[[1]]
class(corp
class(corp)
class(corp)
docvars(1)
docvars(corp)
copr$numArt
corp$numArt
annot = udpipe_annotate(modelo, corp[[i]], doc_id = corp$numArt)
for (i in 1:length(corp)){
annot = udpipe_annotate(modelo, corp[[i]], doc_id = corp$numArt)
}
corp$numArt[1]
corp$numArt[3]
for (i in 1:length(corp)){
annot = udpipe_annotate(modelo, corp[[i]], doc_id = corp$numArt[i])
}
print(annot)
View(annot)
for (i in 1:length(corp)){
annot = as.data.frame(udpipe_annotate(modelo, corp[[i]], doc_id = corp$numArt[i]))
}
analisis = list()
corp = readRDS("const_es.rds")
modelo = udpipe::udpipe_load_model("spanish-ancora-ud-2.5-191206.udpipe")
analisis = list()
for (i in 1:length(corp)){
annot = as.data.frame(udpipe_annotate(modelo, corp[[i]], doc_id = corp$numArt[i]))
analisis = c(analisis, annot)
}
print(annot)
View(analisis)
corp = readRDS("const_es.rds")
modelo = udpipe::udpipe_load_model("spanish-ancora-ud-2.5-191206.udpipe")
analisis = list()
for (i in 1:length(corp)){
annot = list(as.data.frame(udpipe_annotate(modelo, corp[[i]], doc_id = corp$numArt[i])))
analisis = c(analisis, annot)
}
print(annot)
cond = analisis[[1]]$upos == "ADJ"
adjs = analisis[[1]][cond, ]
adjs = adjs$lemma
print(adjs)
adjetivos = list()
for (i in 1:length(analisis)){
cond = analisis[[i]]$upos == "ADJ"
adjs = analisis[[i]][cond, ]
adjs = as.character(adjs$lemma)
adjetivos = c(adjetivos, adjs)
}
View(adjetivos)
tabla_adjs = table(adjetivos)
print(tabla_adjs)
summary(tabla)
summary(tabla_adjs)
cond = analisis[[1]]$upos == "ADJ"
adjs = analisis[[1]][cond, ]
adjs = as.character(adjs$lemma)
print(adjs)
adjs = unlist(adjs$lemma)
print(adjs)
cond = analisis[[1]]$upos == "ADJ"
adjs = analisis[[1]][cond, ]
adjs = adjs$lemma
adjs= as.character(adjs)
print(adjs)
adjs= list(adjs)
View(adjs)
adjs= unlist(adjs)
adjs= str_flatten(adjs, collapse = " ")
cond = analisis[[1]]$upos == "ADJ"
adjs = analisis[[1]][cond, ]
adjs = adjs$lemma
adjs= str_flatten(adjs, collapse = " ")
print(adjs)
adjetivos = list()
for (i in 1:length(analisis)){
cond = analisis[[i]]$upos == "ADJ"
adjs = analisis[[i]][cond, ]
adjs = str_flatten(adjs$lemma, collapse = " ")
adjetivos = c(adjetivos, adjs)
}
tabla_adjs = table(adjetivos)
summary(tabla_adjs)
tabla_adjs = data.frame(adjetivos)
View(tabla_adjs)
tabla_adjs = table(adjetivos)
View(adjetivos)
adjetivos = list()
for (i in 1:length(analisis)){
cond = analisis[[i]]$upos == "ADJ"
adjs = analisis[[i]][cond, ]
adjs = str_flatten(adjs$lemma, collapse = " ")
adjetivos = c(adjetivos, adjs)
}
View(adjetivos)
adjetivos = vector()
for (i in 1:length(analisis)){
cond = analisis[[i]]$upos == "ADJ"
adjs = analisis[[i]][cond, ]
adjs = adjs$lemma
adjetivos = c(adjetivos, adjs)
}
adjetivos = str_flatten(adjetivos, collapse = " ")
adjetivos = vector()
for (i in 1:length(analisis)){
cond = analisis[[i]]$upos == "ADJ"
adjs = analisis[[i]][cond, ]
adjs = adjs$lemma
adjetivos = c(adjetivos, adjs)
}
tabla_adjs = table(adjetivos)
summary(tabla_adjs)
adjetivos = list()
for (i in 1:length(analisis)){
cond = analisis[[i]]$upos == "ADJ"
adjs = analisis[[i]][cond, ]
adjs = adjs$lemma
adjetivos = c(adjetivos, adjs)
}
View(adjetivos)
adjetivos = ""
for (i in 1:length(analisis)){
cond = analisis[[i]]$upos == "ADJ"
adjs = analisis[[i]][cond, ]
adjs = str_flattern(adjs$lemma, collapse= " ")
adjetivos = paste(adjetivos, adjs)
}
adjetivos = ""
for (i in 1:length(analisis)){
cond = analisis[[i]]$upos == "ADJ"
adjs = analisis[[i]][cond, ]
adjs = str_flatter(adjs$lemma, collapse= " ")
adjetivos = paste(adjetivos, adjs)
}
for (i in 1:length(analisis)){
cond = analisis[[i]]$upos == "ADJ"
adjs = analisis[[i]][cond, ]
adjs = str_flatten(adjs$lemma, collapse= " ")
adjetivos = paste(adjetivos, adjs)
}
tabla_adjs = table(adjetivos)
summary(tabla_adjs)
adjetivos = ""
for (i in 1:length(analisis)){
cond = analisis[[i]]$upos == "ADJ"
adjs = analisis[[i]][cond, ]
adjs = str_flatten(adjs$lemma, collapse= " , ")
adjetivos = paste(adjetivos, adjs)
}
tabla_adjs = table(adjetivos)
tabla_adjs = data.frame(adjetivos)
View(tabla_adjs)
adjetivos = list()
for (i in 1:length(analisis)){
cond = analisis[[i]]$upos == "ADJ"
adjs = analisis[[i]][cond, ]
adjs = adjs$lemma
adjetivos = c(adjetivos, adjs)
adjetivos = as.character(adjetivos)
}
tabla_adjs = data.frame(adjetivos)
View(tabla_adjs)
df_adjetivos = data.frame(table(adjetivos))
View(tabla_adjs)
adjetivos = list()
for (i in 1:length(analisis)){
cond = analisis[[i]]$upos == "ADJ"
adjs = analisis[[i]][cond, ]
adjs = adjs$lemma
adjetivos = c(adjetivos, adjs)
adjetivos = as.character(adjetivos)
}
df_adjetivos = data.frame(table(adjetivos))
summary(df_adjetivos)
adjetivos = list()
for (i in 1:length(analisis)){
cond = analisis[[i]]$upos == "ADJ"
adjs = analisis[[i]][cond, ]
adjs = adjs$lemma
adjetivos = c(adjetivos, adjs)
}
adjetivos = as.character(adjetivos)
df_adjetivos = data.frame(table(adjetivos))
View(df_adjetivos)
df_adjetivos = order(df_adjetivos, decreasing=TRUE)
df_adjetivos = df_adjetivos[order(df_adjetivos$Freq, decreasing=TRUE)]
df_adjetivos = df_adjetivos[order(df_adjetivos$Freq, decreasing=TRUE),]
df_adjetivos
print(df_adjetivos)
top_diez = df_adjetivos[1:10,]
top_diez = df_adjetivos$adjetivos
print(top_diez)
View(df_adjetivos)
top_diez = df_adjetivos[1:10,]
top_diez = df_adjetivos$adjetivos
print(top_diez)
df_adjetivos[1]
df_adjetivos[1]
print(df_adjetivos[1])
print(df_adjetivos[1,])
print(df_adjetivos[1:3,])
print(df_adjetivos[1:10,])
top_diez = df_adjetivos[1:10,]
View(df_adjetivos)
View(top_diez)
corp = readRDS("const_es.rds")
modelo = udpipe::udpipe_load_model("spanish-ancora-ud-2.5-191206.udpipe")
analisis = list()
for (i in 1:length(corp)){
annot = list(as.data.frame(udpipe_annotate(modelo, corp[[i]], doc_id = corp$numArt[i])))
analisis = c(analisis, annot)
}
adjetivos = list()
for (i in 1:length(analisis)){
cond = analisis[[i]]$upos == "ADJ"
adjs = analisis[[i]][cond, ]
adjs = adjs$lemma
adjetivos = c(adjetivos, adjs)
}
adjetivos = as.character(adjetivos)
df_adjetivos = data.frame(table(adjetivos))
df_adjetivos = df_adjetivos[order(df_adjetivos$Freq, decreasing=TRUE),]
top_diez = df_adjetivos[1:10,]
top_diez = top_diez$adjetivos
print(top_diez)
corpus_group(corpus, groups= corpus$numTit)
new_corp = readRDS("const_es.rds")
new_corp = corpus_group(corpus, groups= corpus$numTit)
new_corp = corpus_group(new_corp, groups= corpus$numTit)
new_corp = readRDS("const_es.rds")
new_corp = corpus_group(new_corp, groups= corpus$numTit)
new_corp = corpus_group(new_corp, groups= new_corp$numTit)
summary(new_corp)
tok = tokens(new_corp, remove_punct = TRUE, remove_numbers = TRUE, remove_symbols=TRUE, remove_separators = TRUE)
?hclust
hclust(tok)
hclust(tok,method = "complete", members = NULL)
new_corp = corpus_group(new_corp, groups= new_corp$numTit)
tok = tokens(new_corp, remove_punct = TRUE, remove_numbers = TRUE, remove_symbols=TRUE, remove_separators = TRUE)
hclust(tok,method = "complete", members = NULL)
distMatrx = dist(tok)
dfm = dfm(tok)
install.packages("quanteda.sentiments")
if (!require("remotes")) install.packages("remotes")
remotes::install_github("quanteda/quanteda.sentiment")
library(quanteda.sentiment)
setwd("/home/vant/Documentos/Uni/SegundoCuatri/PLN/PLN_Practica/")
source("~/Documentos/Uni/SegundoCuatri/PLN/PLN_Practica/anillos.R")
source("~/Documentos/Uni/SegundoCuatri/PLN/PLN_Practica/anillos.R")
source("~/Documentos/Uni/SegundoCuatri/PLN/PLN_Practica/anillos.R")
source("~/Documentos/Uni/SegundoCuatri/PLN/PLN_Practica/anillos.R")
source("~/Documentos/Uni/SegundoCuatri/PLN/PLN_Practica/anillos.R")
source("camper_reutilizado.R")
dict <- readLines("dic_es.txt", encoding = "UTF-8")
# Variables globales para almacenar el mejor resultado encontrado en la recursión
mejor_anillo_encontrado <- list()
max_longitud_global <- 0
# Función DFS recursiva
dfs_anillo <- function(palabra_act, historial, profundidad_max) {
# Caso base: Si superamos la profundidad máxima, dejamos de buscar por esta rama
if (length(historial) >= profundidad_max) {
return()
}
# Obtener opciones válidas (usando tus funciones de camper_reutilizado.R)
opc_perm <- permutar_letras(palabra_act, dict)
opc_cambio <- cambiar_letra(palabra_act, dict)
opciones <- unique(c(opc_cambio, opc_perm))
# Filtrar para no retroceder inmediatamente a la palabra anterior (evitar anillos de longitud 2 irrelevantes si se desea)
# opciones <- opciones[!(opciones %in% tail(historial, 2))]
for (sig_palabra in opciones) {
if (sig_palabra %in% historial) {
# ¡CICLO DETECTADO!
inicio_idx <- which(historial == sig_palabra)[1]
anillo_actual <- historial[inicio_idx:length(historial)]
longitud_anillo <- length(anillo_actual)
# Si es el más largo que hemos visto, lo guardamos
if (longitud_anillo > max_longitud_global) {
max_longitud_global <<- longitud_anillo
mejor_anillo_encontrado <<- anillo_actual
cat("\rNuevo anillo máximo hallado: Longitud", max_longitud_global)
}
} else {
# Si la palabra no está en el historial, seguimos profundizando
dfs_anillo(sig_palabra, c(historial, sig_palabra), profundidad_max)
}
# Optimizador: Si ya encontramos algo muy grande, podríamos podar ramas,
# pero en DFS puro exploramos todo.
}
}
# Función principal que prepara la búsqueda
anillo_maximo_dfs <- function(palabra_ini, profundidad_max = 20) {
# Reiniciamos variables globales
mejor_anillo_encontrado <<- list()
max_longitud_global <<- 0
print(paste("Iniciando DFS desde:", palabra_ini, "con profundidad máx:", profundidad_max))
# Llamada inicial
dfs_anillo(palabra_ini, c(palabra_ini), profundidad_max)
if (max_longitud_global == 0) {
print("No se encontró ningún anillo en esta rama.")
return(NULL)
}
cat("\n\n--- RESULTADO FINAL ---\n")
print(paste("Anillo más grande encontrado:", paste(mejor_anillo_encontrado, collapse = " -> ")))
print(paste("Longitud:", max_longitud_global))
return(mejor_anillo_encontrado)
}
# --- Lógica de inicio (Igual que la tuya) ---
tamano_palabra <- as.integer(readline(prompt = "Introduce la longitud de las palabras: "))
palabras <- filtro_palabras(tamano_palabra)
if (length(palabras) == 0) { stop("No hay palabras de esa longitud.") }
source("~/Documentos/Uni/SegundoCuatri/PLN/PLN_Practica/anillos.R")
source("~/Documentos/Uni/SegundoCuatri/PLN/PLN_Practica/anillos.R")
source("~/Documentos/Uni/SegundoCuatri/PLN/PLN_Practica/anillos.R")
source("~/Documentos/Uni/SegundoCuatri/PLN/PLN_Practica/anillos.R")
source("~/Documentos/Uni/SegundoCuatri/PLN/PLN_Practica/anillos.R")
source("~/Documentos/Uni/SegundoCuatri/PLN/PLN_Practica/anillos.R")
View(todos_anillos)
source("~/Documentos/Uni/SegundoCuatri/PLN/PLN_Practica/anillos.R")
source("~/Documentos/Uni/SegundoCuatri/PLN/PLN_Practica/anillos.R")
source("~/Documentos/Uni/SegundoCuatri/PLN/PLN_Practica/anillos.R")
source("~/Documentos/Uni/SegundoCuatri/PLN/PLN_Practica/anillos.R")
source("~/Documentos/Uni/SegundoCuatri/PLN/PLN_Practica/anillos.R")
source("~/Documentos/Uni/SegundoCuatri/PLN/PLN_Practica/anillos.R")
source("~/Documentos/Uni/SegundoCuatri/PLN/PLN_Practica/anillos.R")
source("~/Documentos/Uni/SegundoCuatri/PLN/PLN_Practica/anillos.R")
gc()
source("~/Documentos/Uni/SegundoCuatri/PLN/PLN_Practica/anillos.R")
View(todos_anillos)
save.image("~/Documentos/Uni/SegundoCuatri/PLN/PLN_Practica/anillos_ws.RData")
View(todos_anillos)
source("~/Documentos/Uni/SegundoCuatri/PLN/PLN_Practica/anillos.R")
View(todos_anillos)
source("~/Documentos/Uni/SegundoCuatri/PLN/PLN_Practica/anillos.R")
